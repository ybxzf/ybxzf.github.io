{"remainingRequest":"C:\\Users\\熊镇锋\\Desktop\\wit\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\熊镇锋\\Desktop\\wit\\src\\page\\facilities\\index.vue?vue&type=style&index=0&id=91a1e3c4&prod&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\熊镇锋\\Desktop\\wit\\src\\page\\facilities\\index.vue","mtime":1704462643745},{"path":"C:\\Users\\熊镇锋\\Desktop\\wit\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\熊镇锋\\Desktop\\wit\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\熊镇锋\\Desktop\\wit\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\熊镇锋\\Desktop\\wit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\熊镇锋\\Desktop\\wit\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n@import url(\"../../assets/css/index.css\");\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA+QA","file":"index.vue","sourceRoot":"src/page/facilities","sourcesContent":["<template>\r\n  <div class=\"indexBox\"  @mousemove=\"move\">\r\n    <vue-particles v-if=\"isShow\" color=\"#00C6FB\" :particleOpacity=\"0.8\" shapeType=\"circle\" :particleSize=\"40\"\r\n\t\t\t:lineLinked=\"false\" :moveSpeed=\"3\" :hoverEffect=\"false\" :clickEffect=\"false\" class=\"particles\">\r\n\t\t</vue-particles>\r\n    <el-row>\r\n      <el-col :span=\"6\" style=\" height: 77rem; padding: 1rem 0 1rem 1rem\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <device-inform :deviceList=\"this.deviceList\" />\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <tester :testerList=\"this.testerList\" />\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <env-watch :envList=\"this.envList\" />\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <real-time-data :realTimeList=\"this.realTimeList\" />\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n      <el-col :span=\"18\">\r\n        <component :is=\"showComponent\"></component>\r\n        <!-- <electric-meter-watch v-if=\"this.$route.query.equipType == '电能表'\" />\r\n        <normal-meter-watch v-if=\"this.$route.query.equipType == '标准表'\" />\r\n        <transformer-watch v-if=\"this.$route.query.equipType == '互感器'\" /> -->\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport deviceInform from \"./components/deviceInform.vue\";\r\nimport tester from \"./components/tester.vue\";\r\nimport envWatch from \"./components/envWatch.vue\";\r\nimport realTimeData from \"./components/realTimeData.vue\";\r\nimport electricMeterWatch from \"./components/electricMeterWatch.vue\";\r\nimport normalMeterWatch from \"./components/normalMeterWatch.vue\";\r\nimport transformerWatch from \"./components/transformerWatch.vue\";\r\nimport { electricMeterData } from \"./virtualData.js\";\r\n\r\nexport default {\r\n  components: {\r\n    deviceInform,\r\n    tester,\r\n    envWatch,\r\n    realTimeData,\r\n    electricMeterWatch,\r\n    normalMeterWatch,\r\n    transformerWatch,\r\n  }, //注册组件\r\n  name: \"facilities\",\r\n  data() {\r\n    return {\r\n      isShow: false,\r\n      showComponent:'',\r\n      processWatchList:{\r\n      '电能表': 'electricMeterWatch',\r\n      '标准表': 'normalMeterWatch',\r\n      '互感器': 'transformerWatch',\r\n      },\r\n      deviceList: [\r\n        // { name: \"设备名称\", value: \"互感器鉴定装置\" },\r\n        // { name: \"设备编号\", value: \"02031\" },\r\n        // { name: \"设备厂家信息\", value: \"深圳科陆电子\" },\r\n        // { name: \"所属实验室\", value: \"2308\" },\r\n        // { name: \"设备检定日期\", value: \"20220513\" },\r\n        // { name: \"检定有效期\", value: \"20240512\" },\r\n        // { name: \"设备运行状态\", value: \"闲置\" },\r\n      ],\r\n      testerList: [],\r\n      envList: {},\r\n      realTimeList: {},\r\n      // watchList: [],\r\n      interval: null,\r\n      intervalSum: 0,\r\n      hideTime: 1,\r\n      tempObj: {},\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n    this.interval = setInterval(() => {\r\n      if (this.intervalSum > 100) {\r\n        location.reload();\r\n      }\r\n      this.init();\r\n      this.intervalSum++;\r\n    }, 10000);\r\n  },\r\n  methods: {\r\n    init() {\r\n      // console.log('route', this.$route.query);\r\n      //定时器\r\n      this.$request(\"get\", \"/bigScreen/durationLock\").then((res) => {\r\n\t\t\t\tthis.hideTime = res.data;\r\n\t\t\t\tif (this.hideTime) {\r\n\t\t\t\t\tthis.updateHide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n      //设备信息API\r\n      this.$request(\r\n        \"post\", \"/bigScreen/getEquipInfoByNo\", {\r\n        \"equipNo\": this.$route.query.equipNo\r\n      }\r\n      ).then(res => {\r\n        this.deviceList.length = 0\r\n        // const res = {\r\n        //   \"msg\": \"操作成功\",\r\n        //   \"code\": 0,\r\n        //   \"data\": {\r\n        //     \"createBy\": null,\r\n        //     \"createTime\": null,\r\n        //     \"updateBy\": null,\r\n        //     \"updateTime\": null,\r\n        //     \"remark\": null,\r\n        //     \"id\": 6,\r\n        //     \"equipName\": \"三相谐波表检定装置\",//设备名称\r\n        //     \"equipNo\": \"2304##002##WSD001\",//设备编号\r\n        //     \"manufacturers\": \"山东威斯顿\",//厂商\r\n        //     \"laboratoryNo\": \"2304\",//所属实验室\r\n        //     \"checkTime\": \"20220513\",//检定时间\r\n        //     \"validDate\": \"20240512\",//检定有效期\r\n        //     \"isDetail\": \"运行\",//设备状态\r\n        //     \"model\": \"WE0129\",//型号\r\n        //     \"equipType\": \"互感器\"//设备类型\r\n        //   }\r\n        // }\r\n        this.deviceList.push({ name: \"设备名称\", value: res.data.equipName })\r\n        this.deviceList.push({ name: \"设备编号\", value: res.data.equipNo })\r\n        this.deviceList.push({ name: \"设备厂家信息\", value: res.data.manufacturers })\r\n        this.deviceList.push({ name: \"所属实验室\", value: res.data.laboratoryNo })\r\n        this.deviceList.push({ name: \"设备检定日期\", value: res.data.checkTime })\r\n        this.deviceList.push({ name: \"检定有效期\", value: res.data.validDate })\r\n        this.deviceList.push({ name: \"设备运行状态\", value: res.data.isDetail })\r\n        window.localStorage.setItem('deviceStatus', res.data.isDetail)\r\n        this.showComponent = this.processWatchList[this.$route.query.equipType]\r\n      });\r\n      //检定人员\r\n      this.$request(\r\n        \"post\", \"/bigScreen/personnelInfo\", {\r\n        \"equipNo\": this.$route.query.equipNo\r\n      }\r\n      ).then(res => {\r\n        this.testerList = res.data\r\n        if (this.testerList.length == 0) {\r\n          this.testerList = [\r\n            {\r\n              personnelName: \"\",\r\n              post: \"\",\r\n            },\r\n          ]\r\n        }\r\n      })\r\n      //环境监测\r\n      this.$request(\r\n        \"post\", \"/bigScreen/onlineLab\", {\r\n        labNo: window.localStorage.getItem('labNo'),\r\n      }, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n      ).then((res) => {\r\n        this.envList = res.data.sensorInfo;\r\n        if (!res.data.sensorInfo) {\r\n          this.envList = {\r\n            temperature: \"\",\r\n            temperatureState: \"正常\",\r\n            humidity: \"\",\r\n            humidityState: \"正常\",\r\n            illumination: \"\",\r\n            illuminationState: \"正常\",\r\n            electromagnetism: \"\",\r\n            electromagnetismState: \"正常\",\r\n          }\r\n        }\r\n      });\r\n      //实时数据\r\n      this.$request(\r\n        \"post\", \"/bigScreen/equipDataInfo\", {\r\n        equipNo: this.$route.query.equipNo\r\n      }, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n      ).then((res) => {\r\n        this.realTimeList = res.data[0];\r\n        // this.realTimeList = {\r\n        //   \"equipName\": \"三相标准表检定装置\",\r\n        //   \"phia\": \"0.00\",\r\n        //   \"phib\": \"240.00\",\r\n        //   \"phic\": \"120.00\",\r\n        //   \"checker\": \"江正涛\",\r\n        //   \"Ua\": \"99.99\",\r\n        //   \"Ub\": \"100.01\",\r\n        //   \"Uc\": \"99.10\",\r\n        //   \"La\": \"5.01\",\r\n        //   \"equipType\": \"电能表\",\r\n        //   \"Lb\": \"4.99\",\r\n        //   \"Lc\": \"4.98\",\r\n        //   \"equipNo\": \"2303##001##HP001\",\r\n        //   \"projectName\": \"Q+ 合元 0.8C 1.0Ib 基本误差\"\r\n        // }\r\n\r\n        //   {\r\n        //   phase: \"123\",\r\n        //   equipName: \"三相谐波表检定装置\",\r\n        //   lightLoad: \"123\",\r\n        //   rating: \"123\",\r\n        //   accuracy: \"123\",\r\n        //   oneCurrent: \"123\",\r\n        //   updateTime: 1702650566000,\r\n        //   checker: \"江正涛\",\r\n        //   params: {},\r\n        //   booster: \"123\",\r\n        //   twoCurrent: \"123\",\r\n        //   equipType: \"互感器\",\r\n        //   taskNo: \"1202002\",\r\n        //   equipNo: \"2304##002##WSD001\",\r\n        //   id: 1,\r\n        //   resistor: \"123\",\r\n        //   projectName: \"Q+ 合元 0.8C 1.0Ib 基本误差\",\r\n        //   powerFactor: \"123\",\r\n        // }\r\n      });\r\n      //过程监测\r\n      // this.$request(\r\n      //   \"post\",\r\n      //   \"/bigScreen/processMonitor\",\r\n      //   {\r\n      //     equipNo: this.$route.query.equipNo,\r\n      //     taskNo: this.$route.query.taskNo,\r\n      //     equipType: this.$route.query.equipType,\r\n      //   },\r\n      //   {\r\n      //     headers: {\r\n      //       \"Content-Type\": \"application/json\",\r\n      //     },\r\n      //   }\r\n      // )\r\n      //   .then((res) => {\r\n      //     this.watchList = res.data;\r\n      //   })\r\n    },\r\n    move() {\r\n\t\t\tif (this.isShow) {\r\n\t\t\t\tthis.isShow = false;\r\n\t\t\t\twindow.clearTimeout(this.tempObj.hide);\r\n\t\t\t\tthis.tempObj.hide = null;\r\n\t\t\t\tthis.updateHide();\r\n\t\t\t}\r\n\t\t},\r\n    updateHide() {\r\n\t\t\tif (!this.tempObj.hide) {\r\n\t\t\t\tthis.tempObj.hide = setTimeout(() => {\r\n\t\t\t\t\tthis.isShow = true;\r\n\t\t\t\t}, this.hideTime * 1000);\r\n\t\t\t}\r\n\t\t},\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.interval);\r\n    // 清空 localStorage\r\n    // localStorage.clear();\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n@import url(\"../../assets/css/index.css\");\r\n</style>\r\n<style scoped>\r\n.indexBox {\r\n  /* padding: 10px; */\r\n}\r\n\r\n::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n</style>\r\n"]}]}