(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7008652"],{"0574":function(t,s,a){t.exports=a.p+"img/working.08d17b43.png"},"09a0":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"indexBox",on:{mousemove:t.move}},[t.isShow?s("vue-particles",{staticClass:"particles",attrs:{color:"#00C6FB",particleOpacity:.8,shapeType:"circle",particleSize:40,lineLinked:!1,moveSpeed:3,hoverEffect:!1,clickEffect:!1}}):t._e(),s("header",{staticClass:"headBox"},[s("p",{staticClass:"time"},[t._v(t._s(t.time))])]),s("div",{staticClass:"mainBox flexBox"},[s("div",{staticClass:"left"},[s("div",{staticClass:"unusual"},[s("p",{staticClass:"title"},[t._v("异常监测")]),t._m(0),s("div",{staticClass:"swiper",attrs:{id:"unusualSwiper"}},[s("div",{staticClass:"swiper-wrapper"},t._l(t.unusual,(function(a){return s("div",{staticClass:"swiper-slide"},[s("ul",{staticClass:"swiperBody row"},[s("li",[s("span",[t._v(t._s(a.sensorType))])]),s("li",[s("span",[t._v(t._s(a.labName))])]),s("li",[s("span",[t._v(t._s(a.updateTime))])])])])})),0)])]),s("div",{staticClass:"check"},[s("p",{staticClass:"title"},[t._v("监测人员")]),s("div",{staticClass:"swiper",attrs:{id:"check"}},[s("div",{staticClass:"swiper-wrapper"},t._l(t.check,(function(i){return s("div",{staticClass:"swiper-slide"},[s("div",{staticClass:"bodyInfo flexBox"},[i.userStatus?s("img",{staticClass:"icon",attrs:{src:a("0574")}}):s("img",{staticClass:"icon",attrs:{src:a("fab23")}}),s("div",{staticClass:"info"},[s("div",{staticClass:"name fl"},[s("div",[t._v(t._s(i.personnelName))]),s("p",{staticClass:"type"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t资质信息："),s("span",[t._v(t._s(i.post))])])]),s("div",{staticClass:"status"},[s("span",{class:i.userStatus?"work":"rest"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.userStatus?i.userStatus:"休息")+"\n\t\t\t\t\t\t\t\t\t\t")])])])])])})),0)])]),t._m(1)]),s("div",{staticClass:"center"},[s("div",{staticClass:"frame"},[s("img",{staticClass:"icon",attrs:{src:a("bfb7")}}),s("ul",{staticClass:"list"},t._l(t.room,(function(a,i){return s("li",{staticClass:"txtOver",class:i==t.roomIdx?"active":a.errNum?"warn":"wait",on:{click:function(s){return t.changeRoomIdx(i)}}},[s("span",[a.errNum?s("el-badge",{staticClass:"badge",attrs:{value:a.errNum}}):t._e()],1),s("span",[t._v(t._s(a.labName))])])})),0)]),s("div",{staticClass:"flexBox"},[s("div",{staticClass:"room"},[s("p",{staticClass:"title"},[t._v("实验室监测")]),s("div",{staticClass:"swiper",attrs:{id:"room"}},[s("div",{staticClass:"swiper-wrapper"},t._l(t.room,(function(a,i){return s("div",{staticClass:"swiper-slide"},[s("div",{staticClass:"bodyInfo flexBox",class:t.tagList[a.labStatus].class},[s("p",{staticClass:"tag",class:t.tagList[a.labStatus].class}),s("p",{staticClass:"name txtOver"},[s("span",[t._v(t._s(a.labName))])]),s("p",{staticClass:"type"},[t._v(t._s(a.labStatus))])])])})),0)])]),s("div",{staticClass:"onLine"},[s("p",{staticClass:"title"},[t._v("在线监测")]),s("div",{staticClass:"roomTxt"},[t._v("\n\t\t\t\t\t\t"+t._s(t.room&&t.room[t.roomIdx]?t.room[t.roomIdx].labName:"")+"\n\t\t\t\t\t")]),t.onLine.sensorInfo?s("ul",{staticClass:"tagList row flexBox"},[s("li",{staticClass:"flexBox"},["异常"==t.onLine.sensorInfo.temperatureState?s("img",{staticClass:"icon",attrs:{src:a("020f")}}):s("img",{staticClass:"icon",attrs:{src:a("5fb6")}}),s("div",{staticClass:"info"},[s("p",{staticClass:"val",class:"异常"==t.onLine.sensorInfo.temperatureState?"active":""},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.onLine&&Boolean(t.onLine.sensorInfo)?t.onLine.sensorInfo.temperature:"--")+"\n\t\t\t\t\t\t\t\t")]),s("p",{staticClass:"name"},[t._v("温度")])])]),s("li",{staticClass:"flexBox"},["异常"==t.onLine.sensorInfo.humidityState?s("img",{staticClass:"icon",attrs:{src:a("d9ce")}}):s("img",{staticClass:"icon",attrs:{src:a("d947")}}),s("div",{staticClass:"info"},[s("p",{staticClass:"val",class:"异常"==t.onLine.sensorInfo.humidityState?"active":""},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.onLine&&Boolean(t.onLine.sensorInfo)?t.onLine.sensorInfo.humidity:"--")+"\n\t\t\t\t\t\t\t\t")]),s("p",{staticClass:"name"},[t._v("湿度")])])]),s("li",{staticClass:"flexBox"},["异常"==t.onLine.sensorInfo.illuminationState?s("img",{staticClass:"icon",attrs:{src:a("697b")}}):s("img",{staticClass:"icon",attrs:{src:a("05cc")}}),s("div",{staticClass:"info"},[s("p",{staticClass:"val",class:"异常"==t.onLine.sensorInfo.illuminationState?"active":""},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.onLine&&Boolean(t.onLine.sensorInfo)?t.onLine.sensorInfo.illumination:"--")+"\n\t\t\t\t\t\t\t\t")]),s("p",{staticClass:"name"},[t._v("光照")])])]),s("li",{staticClass:"flexBox"},["异常"==t.onLine.sensorInfo.electromagnetismState?s("img",{staticClass:"icon",attrs:{src:a("3953")}}):s("img",{staticClass:"icon",attrs:{src:a("e9db")}}),s("div",{staticClass:"info"},[s("p",{staticClass:"val",class:"异常"==t.onLine.sensorInfo.electromagnetismState?"active":""},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.onLine&&Boolean(t.onLine.sensorInfo)?t.onLine.sensorInfo.electromagnetism:"--")+"\n\t\t\t\t\t\t\t\t")]),s("p",{staticClass:"name"},[t._v("电磁")])])])]):t._e(),t._m(2),s("div",{staticClass:"swiper"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.onLineLoad,expression:"!onLineLoad"}],staticClass:"swiper-wrapper",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)",id:"onLineSwiper"}},[s("div",{staticClass:"swiper-slide"},t._l(t.onLine.rows,(function(a,i){return s("ul",{staticClass:"swiperBody row",class:a.errNum?"red_warn":"",on:{click:function(s){return t.clickJump(a,i)}}},[s("li",{staticClass:"txtOver"},[t._v(t._s(a.equipName||"--"))]),s("li",{class:t.equipState[a.equipState]},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(a.equipState||"--")+"\n\t\t\t\t\t\t\t\t\t")]),s("li",{staticClass:"txtOver"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(a.equipDj||"--")+"\n\t\t\t\t\t\t\t\t\t")]),s("li",{staticClass:"txtOver"},[t._v(t._s(String(a.checkTime||"--").substring(0,7)))]),s("li",[t._v(t._s(String(a.validDate||"--").substring(0,7)))])])})),0)])])])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"quality"},[s("p",{staticClass:"title"},[t._v("当前合格率")]),s("div",{staticClass:"content"},[s("div",{staticStyle:{color:"#45c2ff"}},[t._v("合格率："+t._s(t.passRate.toFixed(2))+"%")]),s("div",{staticStyle:{color:"#ffd635"}},[t._v("不合格率："+t._s((100-t.passRate).toFixed(2))+"%")])]),s("div",{staticClass:"echarts",attrs:{id:"quality"}})]),s("div",{staticClass:"data"},[s("p",{staticClass:"title"},[t._v("数据监测")]),s("div",{staticClass:"roomTxt"},[t._v("\n\t\t\t\t\t"+t._s(t.room&&t.room[t.roomIdx]?t.room[t.roomIdx].labName:"--")+"\n\t\t\t\t")]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.watchLoad,expression:"!watchLoad"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)",id:"dataWatch"}},t._l(t.dataList,(function(a){return s("div",{staticClass:"box"},[s("div",{staticClass:"tag"},[s("p",[t._v(t._s(a.equipName))])]),s("div",{staticClass:"bodyInfo"},[t._m(3,!0),s("div",{staticClass:"right"},[s("div",{staticClass:"right_1"},[s("div",{staticClass:"name"},[t._v("检定项目")]),s("el-tooltip",{attrs:{disabled:!(String(a.projectName).length>25),content:a.projectName,placement:"top"}},[s("div",{staticClass:"person"},[t._v(t._s(String(a.projectName).length>25?"".concat(a.projectName.substring(0,25)," ...")||!1:a.projectName||"--")+"\n\t\t\t\t\t\t\t\t\t\t")])]),s("div",{staticClass:"name"},[t._v("检定人员\n\t\t\t\t\t\t\t\t\t\t"),s("span",{staticClass:"person"},[t._v(t._s(a.checker||"--"))])]),s("div",{staticClass:"name"},[t._v("检定任务\n\t\t\t\t\t\t\t\t\t\t"),s("span",{staticClass:"person"},[t._v(t._s(a.taskNo||"--"))])])],1),"互感器"==a.equipType?s("div",{staticClass:"right_2"},[s("div",{staticClass:"name"},[t._v("实时数据")]),s("ul",{staticClass:"list row"},[s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tI"),s("sub",{staticStyle:{"font-size":"0.5em"}},[t._v("1")]),s("span",[t._v(t._s(a.oneCurrent?a.oneCurrent:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tPn"),s("span",[t._v(t._s(a.rating?a.rating:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tcosφ"),s("span",[t._v(t._s(a.powerFactor?a.powerFactor:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tI"),s("sub",{staticStyle:{"font-size":"0.5em"}},[t._v("2")]),s("span",[t._v(t._s(a.twoCurrent?a.twoCurrent:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tQ "),s("span",[t._v(t._s(a.lightLoad?a.lightLoad:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tφ    \n\t\t\t\t\t\t\t\t\t\t\t"),s("span",[t._v(t._s(a.phase?a.phase:"--"))])])])]):"标准表"==a.equipType?s("div",{staticClass:"right_3"},[s("div",{staticClass:"name"},[t._v("实时数据")]),s("ul",{staticClass:"list row"},[s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tUa"),s("span",[t._v(t._s(a.Ua?a.Ua:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tIa"),s("span",[t._v(t._s(a.La?a.La:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tUb"),s("span",[t._v(t._s(a.Ub?a.Ub:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tIb"),s("span",[t._v(t._s(a.Lb?a.Lb:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tUc"),s("span",[t._v(t._s(a.Uc?a.Uc:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tIc"),s("span",[t._v(t._s(a.Lc?a.Lc:"--"))])])])]):s("div",{staticClass:"right_2"},[s("div",{staticClass:"name"},[t._v("实时数据")]),s("ul",{staticClass:"list row"},[s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tUa"),s("span",[t._v(t._s(a.Ua?a.Ua:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tIa"),s("span",[t._v(t._s(a.La?a.La:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tφa"),s("span",[t._v(t._s(a.phia?a.phia:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tUb"),s("span",[t._v(t._s(a.Ub?a.Ub:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tIb"),s("span",[t._v(t._s(a.Lb?a.Lb:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tφb"),s("span",[t._v(t._s(a.phib?a.phib:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tUc"),s("span",[t._v(t._s(a.Uc?a.Uc:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tIc"),s("span",[t._v(t._s(a.Lc?a.Lc:"--"))])]),s("li",[t._v("\n\t\t\t\t\t\t\t\t\t\t\tφc"),s("span",[t._v(t._s(a.phic?a.phic:"--"))])])])])])])])})),0)])])])],1)},e=[function(){var t=this,s=t._self._c;return s("ul",{staticClass:"swiperHead row"},[s("li",[t._v("异常类型")]),s("li",[t._v("实验室")]),s("li",[t._v("发生时间")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"capacity"},[s("p",{staticClass:"title"},[t._v("产能监测")]),s("div",{staticClass:"echarts",attrs:{id:"capacity"}})])},function(){var t=this,s=t._self._c;return s("ul",{staticClass:"swiperHead row"},[s("li",[t._v("设备名称")]),s("li",[t._v("检定状态")]),s("li",[t._v("设备等级")]),s("li",[t._v("检定日期")]),s("li",[t._v("有效期")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"left"},[s("div",{staticClass:"left_1"},[s("img",{staticClass:"icon",attrs:{src:a("8ef4")}}),s("img",{staticClass:"triangle",attrs:{src:a("3376")}}),s("span",[t._v("基本信息")])]),s("div",{staticClass:"left_2"},[s("img",{staticClass:"icon",attrs:{src:a("952b")}}),s("img",{staticClass:"triangle",attrs:{src:a("3376")}}),s("span",[t._v("实时数据")])])])}],n=(a("7f7f"),a("ac6a"),a("f3e2"),a("c5f6"),a("e39c"),a("4da1")),o=a("f3d4"),l=a("4360");n["c"].use([n["a"],n["b"]]);var c=Object(l["a"])(),r={name:"Index",data:function(){return{refresh:0,tempObj:{},isShow:!1,passRate:0,time:"",unusual:[],check:[],tagList:{"正在使用":{class:"green",txt:"使用"},"闲置待用":{class:"yellow",txt:"待用"},"故障维修":{class:"red",txt:"维修"}},equipState:{"空闲":"green","运行":"green","维修":"yellow","保养":"yellow","关机":"red","异常":"red","停运":"red"},roomIdx:0,room:[{labNo:"2303",labName:"2303实验室",labStatus:"闲置待用"},{labNo:"2304",labName:"2304实验室",labStatus:"正在使用"},{labNo:"2308",labName:"2308实验室",labStatus:"故障维修",errNum:"12"},{labNo:"2309",labName:"2309实验室",labStatus:"正在使用"},{labNo:"2311",labName:"2311实验室",labStatus:"正在使用"},{labNo:"2313",labName:"2313实验室",labStatus:"正在使用"}],onLine:{},onLineLoad:!1,watchLoad:!1,dataList:[],hideTime:1}},mounted:function(){this.getData(),this.updateTime(),this.updateData(),this.roomIdx=Number(window.localStorage.getItem("roomIdx"))||0},watch:{roomIdx:function(t,s){this.updateOnLine(t)}},destroyed:function(){this.tempObj.data&&clearInterval(this.tempObj.data),this.tempObj.timer&&clearInterval(this.tempObj.timer)},methods:{getData:function(){var t=this;this.$request("get","/bigScreen/laboratoryInfo").then((function(s){t.room=s.data,t.$nextTick((function(){t.updateVerticalSwiper("room",6,!(t.room.length<6))})),t.updateOnLine()})),this.$request("get","/bigScreen/durationLock").then((function(s){t.hideTime=s.data,t.hideTime&&t.updateHide()})),this.$request("get","/bigScreen/sensorErrorInfo").then((function(s){t.unusual=s.data,t.$nextTick((function(){t.updateVerticalSwiper("unusualSwiper",4,!(t.unusual.length<4))}))})),this.$request("post","/bigScreen/personnelInfo",{}).then((function(s){t.check=s.data,t.$nextTick((function(){t.updateVerticalSwiper("check",3,!(t.check.length<3))}))})),this.refresh%3===0&&(this.$request("get","/bigScreen/capacity").then((function(s){t.updateCapacity("capacity",s.data)})),this.$request("get","/bigScreen/qualityInfo").then((function(s){t.updateQuality("quality",s.data)})))},updateHide:function(){var t=this;this.tempObj.hide||(this.tempObj.hide=setTimeout((function(){t.isShow=!0}),1e3*this.hideTime))},move:function(){this.isShow&&(this.isShow=!1,window.clearTimeout(this.tempObj.hide),this.tempObj.hide=null,this.updateHide())},updateData:function(){var t=this;this.tempObj.data=setInterval((function(){t.getData(),t.refresh++,t.refresh>50&&location.reload()}),o["a"].updatePage)},updateTime:function(){var t=this;this.time=this.$tools.coverTimeToFormat(this.$tools.getTime()),this.tempObj.timer=setInterval((function(){t.time=t.$tools.coverTimeToFormat(t.$tools.getTime())}),1e3)},updateCapacity:function(t,s){0==s.length&&(s=[{equipType:"电能表检定装置",num:0},{equipType:"标准表检定装置",num:0},{equipType:"互感器检定装置",num:0}]),void 0==this.tempObj[t]&&(this.tempObj[t]=this.$echarts.init(document.getElementById(t)));var a=[],i=[];s.forEach((function(t){t.equipType&&(a.push(t.equipType),i.push({name:t.equipType,value:t.num}))}));var e=this.$myCharts.cylinderOption(a,i);this.$tools.updateEcharts(this.tempObj[t],e)},updateQuality:function(t,s){0===s.qualified&&0===s.unqualified&&(s={qualified:1,unqualified:0,passRate:"100.00"}),void 0==this.tempObj[t]&&(this.tempObj[t]=this.$echarts.init(document.getElementById(t))),this.passRate=Number(s.passRate);var a=this.$myCharts.getPie3D([{name:"合格",value:Number(s.qualified),itemStyle:{color:"#45c2ff"}},{name:"不合格",value:Number(s.unqualified),itemStyle:{color:"#ffd635"}}],.59);this.$tools.updateEcharts(this.tempObj[t],a)},changeRoomIdx:function(t){this.roomIdx=t},updateOnLine:function(){var t=this,s=this.room[this.roomIdx];window.localStorage.setItem("labNo",s.labNo),this.onLineLoad=!1,this.watchLoad=!1,this.$request("post","/bigScreen/onlineLab",{labNo:s.labNo},{headers:{"Content-Type":"application/json"}}).then((function(a){t.onLine.sensorInfo=a.data.sensorInfo,t.$request("post","/bigScreen/online",{labNo:s.labNo},{headers:{"Content-Type":"application/json"}}).then((function(s){t.onLine.rows=s.data.rows,t.tempObj.onLineSwiper&&(t.tempObj.onLineSwiper.destroy(),t.tempObj.onLineSwiper=null)})).finally((function(){t.$nextTick((function(){t.updateVerticalSwiper("onLineSwiper",4,!(t.onLine.rows.length<4))})),t.onLineLoad=!0}))})),this.$request("post","/bigScreen/equipDataInfo",{laboratoryNo:s.labNo},{headers:{"Content-Type":"application/json"}}).then((function(s){t.dataList.length=2;for(var a=0;a<2;a++)t.dataList[a]=s.data[a]})).finally((function(){t.watchLoad=!0}))},clickJump:function(t,s){this.$router.push({path:"/facilities",query:{equipNo:t.equipNo||"",taskNo:t.taskName||"",equipType:t.equipType||""}}),c.updateStatus(t.equipState),window.localStorage.setItem("roomIdx",this.roomIdx||0)},updateVerticalSwiper:function(t,s,a){this.tempObj[t]||(this.tempObj[t]=new n["c"]("#"+t,{direction:"vertical",slidesPerView:s,loop:a,autoplay:{delay:3e3,disableOnInteraction:!1}}))}}},p=r,u=(a("a3db"),a("c333"),a("2877")),d=Object(u["a"])(p,i,e,!1,null,"33c762b9",null);s["default"]=d.exports},"8ef4":function(t,s,a){t.exports=a.p+"img/basicInform.f3365242.png"},"9cd4":function(t,s,a){},a3db:function(t,s,a){"use strict";a("9cd4")},a94e:function(t,s,a){},bfb7:function(t,s,a){t.exports=a.p+"img/icon_6_new.19ffe1b2.png"},c333:function(t,s,a){"use strict";a("a94e")},fab23:function(t,s,a){t.exports=a.p+"img/rest.7effa6fd.png"}}]);
//# sourceMappingURL=chunk-d7008652.87a072c9.js.map